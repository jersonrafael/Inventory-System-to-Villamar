<div class="mx-3" >

    <div class="d-flex justify-content-end m-2">
        <div class="btn btn-success" hx-get="{% url 'add_product' %}" hx-trigger="click"
        hx-target="#body"
        hx-swap="innerHTML">Agregar</div>
    </div>

    <div class="d-flex justify-content-center">
        <table class="table shadow" style="">
            <thead>
                <tr>
                    <th scope="col">Nombre</th>
                    <th scope="col">Precio</th>
                    <th scope="col">Stock</th>
                    <th scope="col">Codigo</th>
                    {% if request.user.is_authenticated%}
                    <th>Opciones</th>
                    {% else %}
                    {% endif%}
                </tr>
            </thead>
            <tbody>
                {% for product in products %}
                <tr>
                    <td>{{ product.name }}</td>
                    <td>{{ product.price }}</td>
                    <td>{{ product.price }}</td>
                    <td>{{ product.code }}</td>

                    {% if request.user.is_authenticated%}
                    {% if request.user.is_staff %}
                    <td>
                        <div class="dropdown">
                            <a class="btn btn-secondary dropdown-toggle" href="#" role="button"
                                data-bs-toggle="dropdown" aria-expanded="false">
                                Mas Acciones
                            </a>

                            <ul class="dropdown-menu">
                                <li>
                                    <div class="dropdown-item" hx-get="{% url 'product' pk=product.id  %}" hx-trigger="click"
                                    hx-target="#body"
                                    hx-swap="innerHTML" >Ver</div>
                                </li>
                                <li>
                                    <div class="dropdown-item" hx-get="{% url 'edit_product' pk=product.id  %}" hx-trigger="click"
                                    hx-target="#body"
                                    hx-swap="innerHTML" >Modificar</div>
                                    <!-- <a class="dropdown-item" href="#">Modificar</a> -->
                                </li>
                                <li><a class="dropdown-item" href="#">Eliminar</a></li>
                            </ul>
                        </div>
                    </td>
                    {% else %}
                    <td>
                        <li>
                            <a href="">Agregar al carro</a>
                        </li>
                    </td>
                    {% endif%}

                    {% else %}

                    {% endif%}
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
</div>